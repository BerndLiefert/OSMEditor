{"id":"fyRJ","dependencies":[{"name":"D:\\Projects\\ol\\package.json","includedInParent":true,"mtime":1586548571472},{"name":"D:\\Projects\\ol\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1586157047249},{"name":"../Feature.js","loc":{"line":17,"column":20},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\Feature.js"},{"name":"../MapBrowserEventType.js","loc":{"line":18,"column":32},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\MapBrowserEventType.js"},{"name":"../coordinate.js","loc":{"line":19,"column":137},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\coordinate.js"},{"name":"../events/Event.js","loc":{"line":20,"column":18},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\events\\Event.js"},{"name":"../extent.js","loc":{"line":21,"column":40},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\extent.js"},{"name":"../geom/GeometryType.js","loc":{"line":22,"column":25},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\geom\\GeometryType.js"},{"name":"../geom/Point.js","loc":{"line":23,"column":18},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\geom\\Point.js"},{"name":"../geom/Polygon.js","loc":{"line":24,"column":48},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\geom\\Polygon.js"},{"name":"./Pointer.js","loc":{"line":25,"column":31},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Pointer.js"},{"name":"../layer/Vector.js","loc":{"line":26,"column":24},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\layer\\Vector.js"},{"name":"../source/Vector.js","loc":{"line":27,"column":25},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\source\\Vector.js"},{"name":"../style/Style.js","loc":{"line":28,"column":35},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\style\\Style.js"},{"name":"../proj.js","loc":{"line":29,"column":29},"parent":"D:\\Projects\\ol\\node_modules\\ol\\interaction\\Extent.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\proj.js"}],"generated":{"js":"var $fyRJ$exports={};$parcel$require(\"fyRJ\",\"../Feature.js\"),$parcel$require(\"fyRJ\",\"../MapBrowserEventType.js\"),$parcel$require(\"fyRJ\",\"../coordinate.js\"),$parcel$require(\"fyRJ\",\"../events/Event.js\"),$parcel$require(\"fyRJ\",\"../extent.js\"),$parcel$require(\"fyRJ\",\"../geom/GeometryType.js\"),$parcel$require(\"fyRJ\",\"../geom/Point.js\"),$parcel$require(\"fyRJ\",\"../geom/Polygon.js\"),$parcel$require(\"fyRJ\",\"./Pointer.js\"),$parcel$require(\"fyRJ\",\"../layer/Vector.js\"),$parcel$require(\"fyRJ\",\"../source/Vector.js\"),$parcel$require(\"fyRJ\",\"../style/Style.js\"),$parcel$require(\"fyRJ\",\"../proj.js\");var $fyRJ$var$__extends=$fyRJ$exports&&$fyRJ$exports.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),$fyRJ$var$ExtentEventType={EXTENTCHANGED:\"extentchanged\"},$fyRJ$var$ExtentEvent=function(e){function t(t){var r=e.call(this,$fyRJ$var$ExtentEventType.EXTENTCHANGED)||this;return r.extent=t,r}return $fyRJ$var$__extends(t,e),t}($fyRJ$import$Event),$fyRJ$export$default=function(e){function t(t){var r=this,n=t||{};return(r=e.call(this,n)||this).extent_=null,r.pointerHandler_=null,r.pixelTolerance_=void 0!==n.pixelTolerance?n.pixelTolerance:10,r.snappedToVertex_=!1,r.extentFeature_=null,r.vertexFeature_=null,t||(t={}),r.extentOverlay_=new $fyRJ$import$VectorLayer({source:new $fyRJ$import$VectorSource({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.boxStyle?t.boxStyle:$fyRJ$var$getDefaultExtentStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),r.vertexOverlay_=new $fyRJ$import$VectorLayer({source:new $fyRJ$import$VectorSource({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.pointerStyle?t.pointerStyle:$fyRJ$var$getDefaultPointerStyleFunction(),updateWhileAnimating:!0,updateWhileInteracting:!0}),t.extent&&r.setExtent(t.extent),r}return $fyRJ$var$__extends(t,e),t.prototype.snapToVertex_=function(e,t){var r=t.getCoordinateFromPixelInternal(e),n=this.getExtentInternal();if(n){var o=$fyRJ$var$getSegments(n);o.sort(function(e,t){return $fyRJ$import$squaredDistanceToSegment(r,e)-$fyRJ$import$squaredDistanceToSegment(r,t)});var i=o[0],a=$fyRJ$import$closestOnSegment(r,i),$=t.getPixelFromCoordinateInternal(a);if($fyRJ$import$coordinateDistance(e,$)<=this.pixelTolerance_){var l=t.getPixelFromCoordinateInternal(i[0]),p=t.getPixelFromCoordinateInternal(i[1]),u=$fyRJ$import$squaredCoordinateDistance($,l),y=$fyRJ$import$squaredCoordinateDistance($,p),s=Math.sqrt(Math.min(u,y));return this.snappedToVertex_=s<=this.pixelTolerance_,this.snappedToVertex_&&(a=u>y?i[1]:i[0]),a}}return null},t.prototype.handlePointerMove_=function(e){var t=e.pixel,r=e.map,n=this.snapToVertex_(t,r);n||(n=r.getCoordinateFromPixelInternal(t)),this.createOrUpdatePointerFeature_(n)},t.prototype.createOrUpdateExtentFeature_=function(e){var t=this.extentFeature_;return t?e?t.setGeometry($fyRJ$import$polygonFromExtent(e)):t.setGeometry(void 0):(t=e?new $fyRJ$import$Feature($fyRJ$import$polygonFromExtent(e)):new $fyRJ$import$Feature({}),this.extentFeature_=t,this.extentOverlay_.getSource().addFeature(t)),t},t.prototype.createOrUpdatePointerFeature_=function(e){var t=this.vertexFeature_;t?t.getGeometry().setCoordinates(e):(t=new $fyRJ$import$Feature(new $fyRJ$import$Point(e)),this.vertexFeature_=t,this.vertexOverlay_.getSource().addFeature(t));return t},t.prototype.handleEvent=function(t){return!t.pointerEvent||(t.type!=$fyRJ$import$MapBrowserEventType.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),e.prototype.handleEvent.call(this,t),!1)},t.prototype.handleDownEvent=function(e){var t=e.pixel,r=e.map,n=this.getExtentInternal(),o=this.snapToVertex_(t,r),i=function(e){var t=null,r=null;return e[0]==n[0]?t=n[2]:e[0]==n[2]&&(t=n[0]),e[1]==n[1]?r=n[3]:e[1]==n[3]&&(r=n[1]),null!==t&&null!==r?[t,r]:null};if(o&&n){var a=o[0]==n[0]||o[0]==n[2]?o[0]:null,$=o[1]==n[1]||o[1]==n[3]?o[1]:null;null!==a&&null!==$?this.pointerHandler_=$fyRJ$var$getPointHandler(i(o)):null!==a?this.pointerHandler_=$fyRJ$var$getEdgeHandler(i([a,n[1]]),i([a,n[3]])):null!==$&&(this.pointerHandler_=$fyRJ$var$getEdgeHandler(i([n[0],$]),i([n[2],$])))}else o=r.getCoordinateFromPixelInternal(t),this.setExtent([o[0],o[1],o[0],o[1]]),this.pointerHandler_=$fyRJ$var$getPointHandler(o);return!0},t.prototype.handleDragEvent=function(e){if(this.pointerHandler_){var t=e.coordinate;this.setExtent(this.pointerHandler_(t)),this.createOrUpdatePointerFeature_(t)}return!0},t.prototype.handleUpEvent=function(e){this.pointerHandler_=null;var t=this.getExtentInternal();return t&&0!==$fyRJ$import$getArea(t)||this.setExtent(null),!1},t.prototype.setMap=function(t){this.extentOverlay_.setMap(t),this.vertexOverlay_.setMap(t),e.prototype.setMap.call(this,t)},t.prototype.getExtent=function(){return $fyRJ$import$toUserExtent(this.getExtentInternal(),this.getMap().getView().getProjection())},t.prototype.getExtentInternal=function(){return this.extent_},t.prototype.setExtent=function(e){this.extent_=e||null,this.createOrUpdateExtentFeature_(e),this.dispatchEvent(new $fyRJ$var$ExtentEvent(this.extent_))},t}($fyRJ$import$PointerInteraction);function $fyRJ$var$getDefaultExtentStyleFunction(){var e=$fyRJ$import$createEditingStyle();return function(t,r){return e[$fyRJ$import$GeometryType.POLYGON]}}function $fyRJ$var$getDefaultPointerStyleFunction(){var e=$fyRJ$import$createEditingStyle();return function(t,r){return e[$fyRJ$import$GeometryType.POINT]}}function $fyRJ$var$getPointHandler(e){return function(t){return $fyRJ$import$boundingExtent([e,t])}}function $fyRJ$var$getEdgeHandler(e,t){return e[0]==t[0]?function(r){return $fyRJ$import$boundingExtent([e,[r[0],t[1]]])}:e[1]==t[1]?function(r){return $fyRJ$import$boundingExtent([e,[t[0],r[1]]])}:null}function $fyRJ$var$getSegments(e){return[[[e[0],e[1]],[e[0],e[3]]],[[e[0],e[3]],[e[2],e[3]]],[[e[2],e[3]],[e[2],e[1]]],[[e[2],e[1]],[e[0],e[1]]]]}$fyRJ$exports.default=$fyRJ$export$default;"},"sourceMaps":null,"error":null,"hash":"b929d1a3b57cf38715db86af2ed818d0","cacheData":{"env":{},"imports":{"$fyRJ$import$Feature":["../Feature.js","default"],"$fyRJ$import$MapBrowserEventType":["../MapBrowserEventType.js","default"],"$fyRJ$import$squaredDistanceToSegment":["../coordinate.js","squaredDistanceToSegment"],"$fyRJ$import$closestOnSegment":["../coordinate.js","closestOnSegment"],"$fyRJ$import$coordinateDistance":["../coordinate.js","distance"],"$fyRJ$import$squaredCoordinateDistance":["../coordinate.js","squaredDistance"],"$fyRJ$import$Event":["../events/Event.js","default"],"$fyRJ$import$boundingExtent":["../extent.js","boundingExtent"],"$fyRJ$import$getArea":["../extent.js","getArea"],"$fyRJ$import$GeometryType":["../geom/GeometryType.js","default"],"$fyRJ$import$Point":["../geom/Point.js","default"],"$fyRJ$import$polygonFromExtent":["../geom/Polygon.js","fromExtent"],"$fyRJ$import$PointerInteraction":["./Pointer.js","default"],"$fyRJ$import$VectorLayer":["../layer/Vector.js","default"],"$fyRJ$import$VectorSource":["../source/Vector.js","default"],"$fyRJ$import$createEditingStyle":["../style/Style.js","createEditingStyle"],"$fyRJ$import$toUserExtent":["../proj.js","toUserExtent"]},"exports":{"default":"$fyRJ$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}