{"id":"sCjt","dependencies":[{"name":"D:\\Projects\\ol\\package.json","includedInParent":true,"mtime":1586548571472},{"name":"D:\\Projects\\ol\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1586157047249},{"name":"../../array.js","loc":{"line":4,"column":42},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\ExecutorGroup.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\array.js"},{"name":"../../dom.js","loc":{"line":5,"column":38},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\ExecutorGroup.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\dom.js"},{"name":"../../extent.js","loc":{"line":6,"column":54},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\ExecutorGroup.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\extent.js"},{"name":"../../geom/flat/transform.js","loc":{"line":7,"column":28},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\ExecutorGroup.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\geom\\flat\\transform.js"},{"name":"../../obj.js","loc":{"line":8,"column":24},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\ExecutorGroup.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\obj.js"},{"name":"./BuilderType.js","loc":{"line":9,"column":24},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\ExecutorGroup.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\BuilderType.js"},{"name":"../../transform.js","loc":{"line":10,"column":71},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\ExecutorGroup.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\transform.js"},{"name":"./Executor.js","loc":{"line":11,"column":21},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\ExecutorGroup.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js"}],"generated":{"js":"var $sCjt$exports={};$parcel$require(\"sCjt\",\"../../array.js\"),$parcel$require(\"sCjt\",\"../../dom.js\"),$parcel$require(\"sCjt\",\"../../extent.js\"),$parcel$require(\"sCjt\",\"../../geom/flat/transform.js\"),$parcel$require(\"sCjt\",\"../../obj.js\"),$parcel$require(\"sCjt\",\"./BuilderType.js\"),$parcel$require(\"sCjt\",\"../../transform.js\"),$parcel$require(\"sCjt\",\"./Executor.js\");var $sCjt$var$ORDER=[$sCjt$import$BuilderType.POLYGON,$sCjt$import$BuilderType.CIRCLE,$sCjt$import$BuilderType.LINE_STRING,$sCjt$import$BuilderType.IMAGE,$sCjt$import$BuilderType.TEXT,$sCjt$import$BuilderType.DEFAULT],$sCjt$export$default=function(){function r(r,t,e,i,o,$){this.maxExtent_=r,this.overlaps_=i,this.pixelRatio_=e,this.resolution_=t,this.renderBuffer_=$,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=$sCjt$import$createTransform(),this.createExecutors_(o)}return r.prototype.clip=function(r,t){var e=this.getClipCoords(t);r.beginPath(),r.moveTo(e[0],e[1]),r.lineTo(e[2],e[3]),r.lineTo(e[4],e[5]),r.lineTo(e[6],e[7]),r.clip()},r.prototype.createExecutors_=function(r){for(var t in r){var e=this.executorsByZIndex_[t];void 0===e&&(e={},this.executorsByZIndex_[t]=e);var i=r[t];for(var o in i){var $=i[o];e[o]=new $sCjt$import$Executor(this.resolution_,this.pixelRatio_,this.overlaps_,$)}}},r.prototype.hasExecutors=function(r){for(var t in this.executorsByZIndex_)for(var e=this.executorsByZIndex_[t],i=0,o=r.length;i<o;++i)if(r[i]in e)return!0;return!1},r.prototype.forEachFeatureAtCoordinate=function(r,t,e,i,o,$){var s=2*(i=Math.round(i))+1,a=$sCjt$import$composeTransform(this.hitDetectionTransform_,i+.5,i+.5,1/t,-1/t,-e,-r[0],-r[1]);this.hitDetectionContext_||(this.hitDetectionContext_=$sCjt$import$createCanvasContext2D(s,s));var n,l=this.hitDetectionContext_;l.canvas.width!==s||l.canvas.height!==s?(l.canvas.width=s,l.canvas.height=s):l.clearRect(0,0,s,s),void 0!==this.renderBuffer_&&(n=$sCjt$import$createEmpty(),$sCjt$import$extendCoordinate(n,r),$sCjt$import$buffer(n,t*(this.renderBuffer_+i),n));var c,C=$sCjt$export$getCircleArray(i);function p(r){for(var t=l.getImageData(0,0,s,s).data,e=0;e<s;e++)for(var i=0;i<s;i++)if(C[e][i]&&t[4*(i*s+e)+3]>0){var a=void 0;return(!$||c!=$sCjt$import$BuilderType.IMAGE&&c!=$sCjt$import$BuilderType.TEXT||-1!==$.indexOf(r))&&(a=o(r)),a||void l.clearRect(0,0,s,s)}}var u,f,j,v,d,h=Object.keys(this.executorsByZIndex_).map(Number);for(h.sort($sCjt$import$numberSafeCompareFunction),u=h.length-1;u>=0;--u){var x=h[u].toString();for(j=this.executorsByZIndex_[x],f=$sCjt$var$ORDER.length-1;f>=0;--f)if(void 0!==(v=j[c=$sCjt$var$ORDER[f]])&&(d=v.executeHitDetection(l,a,e,p,n)))return d}},r.prototype.getClipCoords=function(r){var t=this.maxExtent_;if(!t)return null;var e=t[0],i=t[1],o=t[2],$=t[3],s=[e,i,e,$,o,$,o,i];return $sCjt$import$transform2D(s,0,8,2,r,s),s},r.prototype.isEmpty=function(){return $sCjt$import$isEmpty(this.executorsByZIndex_)},r.prototype.execute=function(r,t,e,i,o,$){var s=Object.keys(this.executorsByZIndex_).map(Number);s.sort($sCjt$import$numberSafeCompareFunction),this.maxExtent_&&(r.save(),this.clip(r,t));var a,n,l,c,C,p,u=o||$sCjt$var$ORDER;for(a=0,n=s.length;a<n;++a){var f=s[a].toString();for(C=this.executorsByZIndex_[f],l=0,c=u.length;l<c;++l){var j=u[l];if(void 0!==(p=C[j]))if(!$||j!=$sCjt$import$BuilderType.IMAGE&&j!=$sCjt$import$BuilderType.TEXT)p.execute(r,t,e,i);else{var v=$[f];v?v.push(p,t.slice(0)):$[f]=[p,t.slice(0)]}}}this.maxExtent_&&r.restore()},r}(),$sCjt$var$circleArrayCache={0:[[!0]]};function $sCjt$var$fillCircleArrayRowToMiddle(r,t,e){var i,o=Math.floor(r.length/2);if(t>=o)for(i=o;i<t;i++)r[i][e]=!0;else if(t<o)for(i=t+1;i<o;i++)r[i][e]=!0}function $sCjt$export$getCircleArray(r){if(void 0!==$sCjt$var$circleArrayCache[r])return $sCjt$var$circleArrayCache[r];for(var t=2*r+1,e=new Array(t),i=0;i<t;i++)e[i]=new Array(t);for(var o=r,$=0,s=0;o>=$;)$sCjt$var$fillCircleArrayRowToMiddle(e,r+o,r+$),$sCjt$var$fillCircleArrayRowToMiddle(e,r+$,r+o),$sCjt$var$fillCircleArrayRowToMiddle(e,r-$,r+o),$sCjt$var$fillCircleArrayRowToMiddle(e,r-o,r+$),$sCjt$var$fillCircleArrayRowToMiddle(e,r-o,r-$),$sCjt$var$fillCircleArrayRowToMiddle(e,r-$,r-o),$sCjt$var$fillCircleArrayRowToMiddle(e,r+$,r-o),$sCjt$var$fillCircleArrayRowToMiddle(e,r+o,r-$),2*((s+=1+2*++$)-o)+1>0&&(s+=1-2*(o-=1));return $sCjt$var$circleArrayCache[r]=e,e}function $sCjt$export$replayDeclutter(r,t,e,i,o,$){for(var s=Object.keys(r).map(Number).sort($sCjt$import$numberSafeCompareFunction),a=0,n=s.length;a<n;++a)for(var l=r[s[a].toString()],c=void 0,C=0,p=l.length;C<p;){var u=l[C++];u!==c&&(c=u,$.push({items:u.declutterItems,opacity:i}));var f=l[C++];u.execute(t,f,e,o)}}$sCjt$exports.getCircleArray=$sCjt$export$getCircleArray,$sCjt$exports.replayDeclutter=$sCjt$export$replayDeclutter,$sCjt$exports.default=$sCjt$export$default;"},"sourceMaps":null,"error":null,"hash":"2233fc2735aada3a0714d97167cc4936","cacheData":{"env":{},"imports":{"$sCjt$import$numberSafeCompareFunction":["../../array.js","numberSafeCompareFunction"],"$sCjt$import$createCanvasContext2D":["../../dom.js","createCanvasContext2D"],"$sCjt$import$buffer":["../../extent.js","buffer"],"$sCjt$import$createEmpty":["../../extent.js","createEmpty"],"$sCjt$import$extendCoordinate":["../../extent.js","extendCoordinate"],"$sCjt$import$transform2D":["../../geom/flat/transform.js","transform2D"],"$sCjt$import$isEmpty":["../../obj.js","isEmpty"],"$sCjt$import$BuilderType":["./BuilderType.js","default"],"$sCjt$import$createTransform":["../../transform.js","create"],"$sCjt$import$composeTransform":["../../transform.js","compose"],"$sCjt$import$Executor":["./Executor.js","default"]},"exports":{"getCircleArray":"$sCjt$export$getCircleArray","replayDeclutter":"$sCjt$export$replayDeclutter","default":"$sCjt$export$default"},"wildcards":[],"sideEffects":false,"isES6Module":true}}