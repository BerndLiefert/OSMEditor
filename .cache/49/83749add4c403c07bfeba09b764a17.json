{"id":"rGfC","dependencies":[{"name":"D:\\Projects\\ol\\package.json","includedInParent":true,"mtime":1586548571472},{"name":"D:\\Projects\\ol\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1586157047249},{"name":"../dom.js","loc":{"line":17,"column":38},"parent":"D:\\Projects\\ol\\node_modules\\ol\\style\\IconImage.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\dom.js"},{"name":"../events/Target.js","loc":{"line":18,"column":24},"parent":"D:\\Projects\\ol\\node_modules\\ol\\style\\IconImage.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\events\\Target.js"},{"name":"../events/EventType.js","loc":{"line":19,"column":22},"parent":"D:\\Projects\\ol\\node_modules\\ol\\style\\IconImage.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\events\\EventType.js"},{"name":"../ImageState.js","loc":{"line":20,"column":23},"parent":"D:\\Projects\\ol\\node_modules\\ol\\style\\IconImage.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\ImageState.js"},{"name":"./IconImageCache.js","loc":{"line":21,"column":41},"parent":"D:\\Projects\\ol\\node_modules\\ol\\style\\IconImage.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\style\\IconImageCache.js"},{"name":"../Image.js","loc":{"line":22,"column":28},"parent":"D:\\Projects\\ol\\node_modules\\ol\\style\\IconImage.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\Image.js"}],"generated":{"js":"var $rGfC$exports={};$parcel$require(\"rGfC\",\"../dom.js\"),$parcel$require(\"rGfC\",\"../events/Target.js\"),$parcel$require(\"rGfC\",\"../events/EventType.js\"),$parcel$require(\"rGfC\",\"../ImageState.js\"),$parcel$require(\"rGfC\",\"./IconImageCache.js\"),$parcel$require(\"rGfC\",\"../Image.js\");var $rGfC$var$__extends=$rGfC$exports&&$rGfC$exports.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function a(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(a.prototype=i.prototype,new a)}}(),$rGfC$export$default=function(t){function e(e,i,a,r,n,s){var o=t.call(this)||this;return o.hitDetectionImage_=null,o.image_=e||new Image,null!==r&&(o.image_.crossOrigin=r),o.canvas_=s?document.createElement(\"canvas\"):null,o.color_=s,o.unlisten_=null,o.imageState_=n,o.size_=a,o.src_=i,o.tainted_,o}return $rGfC$var$__extends(e,t),e.prototype.isTainted_=function(t){if(void 0===this.tainted_&&this.imageState_===$rGfC$import$ImageState.LOADED){t||(t=$rGfC$import$createCanvasContext2D(1,1)).drawImage(this.image_,0,0);try{t.getImageData(0,0,1,1),this.tainted_=!1}catch(e){this.tainted_=!0}}return!0===this.tainted_},e.prototype.dispatchChangeEvent_=function(){this.dispatchEvent($rGfC$import$EventType.CHANGE)},e.prototype.handleImageError_=function(){this.imageState_=$rGfC$import$ImageState.ERROR,this.unlistenImage_(),this.dispatchChangeEvent_()},e.prototype.handleImageLoad_=function(){this.imageState_=$rGfC$import$ImageState.LOADED,this.size_&&(this.image_.width=this.size_[0],this.image_.height=this.size_[1]),this.size_=[this.image_.width,this.image_.height],this.unlistenImage_(),this.replaceColor_(),this.dispatchChangeEvent_()},e.prototype.getImage=function(t){return this.canvas_?this.canvas_:this.image_},e.prototype.getImageState=function(){return this.imageState_},e.prototype.getHitDetectionImage=function(t){if(!this.hitDetectionImage_)if(this.isTainted_()){var e=this.size_[0],i=this.size_[1],a=$rGfC$import$createCanvasContext2D(e,i);a.fillRect(0,0,e,i),this.hitDetectionImage_=a.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_},e.prototype.getSize=function(){return this.size_},e.prototype.getSrc=function(){return this.src_},e.prototype.load=function(){if(this.imageState_==$rGfC$import$ImageState.IDLE){this.imageState_=$rGfC$import$ImageState.LOADING;try{this.image_.src=this.src_}catch(t){this.handleImageError_()}this.unlisten_=$rGfC$import$listenImage(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this))}},e.prototype.replaceColor_=function(){if(this.color_){this.canvas_.width=this.image_.width,this.canvas_.height=this.image_.height;var t=this.canvas_.getContext(\"2d\");if(t.drawImage(this.image_,0,0),this.isTainted_(t)){var e=this.color_;return t.globalCompositeOperation=\"multiply\",t.fillStyle=\"rgb(\"+e[0]+\",\"+e[1]+\",\"+e[2]+\")\",t.fillRect(0,0,this.image_.width,this.image_.height),t.globalCompositeOperation=\"destination-in\",void t.drawImage(this.image_,0,0)}for(var i=t.getImageData(0,0,this.image_.width,this.image_.height),a=i.data,r=this.color_[0]/255,n=this.color_[1]/255,s=this.color_[2]/255,o=0,h=a.length;o<h;o+=4)a[o]*=r,a[o+1]*=n,a[o+2]*=s;t.putImageData(i,0,0)}},e.prototype.unlistenImage_=function(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)},e}($rGfC$import$EventTarget);function $rGfC$export$get(t,e,i,a,r,n){var s=$rGfC$import$iconImageCache.get(e,a,n);return s||(s=new $rGfC$export$default(t,e,i,a,r,n),$rGfC$import$iconImageCache.set(e,a,n,s)),s}$rGfC$exports.get=$rGfC$export$get,$rGfC$exports.default=$rGfC$export$default;"},"sourceMaps":null,"error":null,"hash":"e4c55ff38bf8b47fdc7fd7b9c80dc1ff","cacheData":{"env":{},"imports":{"$rGfC$import$createCanvasContext2D":["../dom.js","createCanvasContext2D"],"$rGfC$import$EventTarget":["../events/Target.js","default"],"$rGfC$import$EventType":["../events/EventType.js","default"],"$rGfC$import$ImageState":["../ImageState.js","default"],"$rGfC$import$iconImageCache":["./IconImageCache.js","shared"],"$rGfC$import$listenImage":["../Image.js","listenImage"]},"exports":{"get":"$rGfC$export$get","default":"$rGfC$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}