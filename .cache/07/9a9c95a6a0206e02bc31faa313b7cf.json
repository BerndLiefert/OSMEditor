{"id":"iZLT","dependencies":[{"name":"D:\\Projects\\ol\\package.json","includedInParent":true,"mtime":1586548571472},{"name":"D:\\Projects\\ol\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1586157047249},{"name":"../../array.js","loc":{"line":4,"column":23},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\array.js"},{"name":"../../extent.js","loc":{"line":5,"column":85},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\extent.js"},{"name":"../../geom/flat/length.js","loc":{"line":6,"column":33},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\geom\\flat\\length.js"},{"name":"../../geom/flat/textpath.js","loc":{"line":7,"column":31},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\geom\\flat\\textpath.js"},{"name":"../../geom/flat/transform.js","loc":{"line":8,"column":28},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\geom\\flat\\transform.js"},{"name":"../canvas.js","loc":{"line":13,"column":97},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas.js"},{"name":"./Instruction.js","loc":{"line":10,"column":30},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Instruction.js"},{"name":"./TextBuilder.js","loc":{"line":11,"column":27},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\TextBuilder.js"},{"name":"../../transform.js","loc":{"line":12,"column":135},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\transform.js"},{"name":"rbush/rbush.js","loc":{"line":14,"column":18},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\rbush\\rbush.js"},{"name":"../../has.js","loc":{"line":15,"column":40},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Executor.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\has.js"}],"generated":{"js":"var $iZLT$exports={};$parcel$require(\"iZLT\",\"../../array.js\"),$parcel$require(\"iZLT\",\"../../extent.js\"),$parcel$require(\"iZLT\",\"../../geom/flat/length.js\"),$parcel$require(\"iZLT\",\"../../geom/flat/textpath.js\"),$parcel$require(\"iZLT\",\"../../geom/flat/transform.js\"),$parcel$require(\"iZLT\",\"../canvas.js\"),$parcel$require(\"iZLT\",\"./Instruction.js\"),$parcel$require(\"iZLT\",\"./TextBuilder.js\"),$parcel$require(\"iZLT\",\"../../transform.js\"),$parcel$require(\"iZLT\",\"../canvas.js\"),$parcel$require(\"iZLT\",\"rbush/rbush.js\"),$parcel$require(\"iZLT\",\"../../has.js\");var $iZLT$var$tmpExtent=$iZLT$import$createEmpty(),$iZLT$var$tmpTransform=$iZLT$import$createTransform(),$iZLT$var$p1=[],$iZLT$var$p2=[],$iZLT$var$p3=[],$iZLT$var$p4=[],$iZLT$export$default=function(){function t(t,i,e,r){this.overlaps=e,this.pixelRatio=i,this.resolution=t,this.alignFill_,this.declutterItems=[],this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=$iZLT$import$createTransform(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}return t.prototype.createLabel=function(t,i,e,r){var a=t+i+e+r;if(this.labels_[a])return this.labels_[a];var $=r?this.strokeStates[r]:null,s=e?this.fillStates[e]:null,o=this.textStates[i],n=this.pixelRatio,l=o.scale*n,p=$iZLT$import$TEXT_ALIGN[o.textAlign||$iZLT$import$defaultTextAlign],h=r&&$.lineWidth?$.lineWidth:0,T=t.split(\"\\n\"),L=T.length,v=[],m=$iZLT$import$measureTextWidths(o.font,T,v),u=$iZLT$import$measureTextHeight(o.font),c=u*L,Z=m+h,f=[],d={width:Math.ceil((Z+2)*l),height:Math.ceil((c+h)*l),contextInstructions:f};(1!=l&&f.push(\"scale\",[l,l]),f.push(\"font\",o.font),r)&&(f.push(\"strokeStyle\",$.strokeStyle),f.push(\"lineWidth\",h),f.push(\"lineCap\",$.lineCap),f.push(\"lineJoin\",$.lineJoin),f.push(\"miterLimit\",$.miterLimit),($iZLT$import$WORKER_OFFSCREEN_CANVAS?OffscreenCanvasRenderingContext2D:CanvasRenderingContext2D).prototype.setLineDash&&(f.push(\"setLineDash\",[$.lineDash]),f.push(\"lineDashOffset\",$.lineDashOffset)));e&&f.push(\"fillStyle\",s.fillStyle),f.push(\"textBaseline\",\"middle\"),f.push(\"textAlign\",\"center\");var _,x=.5-p,g=p*Z+x*h;if(r)for(_=0;_<L;++_)f.push(\"strokeText\",[T[_],g+x*v[_],.5*(h+u)+_*u]);if(e)for(_=0;_<L;++_)f.push(\"fillText\",[T[_],g+x*v[_],.5*(h+u)+_*u]);return this.labels_[a]=d,d},t.prototype.replayTextBackground_=function(t,i,e,r,a,$,s){t.beginPath(),t.moveTo.apply(t,i),t.lineTo.apply(t,e),t.lineTo.apply(t,r),t.lineTo.apply(t,a),t.lineTo.apply(t,i),$&&(this.alignFill_=$[2],this.fill_(t)),s&&(this.setStrokeStyle_(t,s),t.stroke())},t.prototype.replayImageOrLabel_=function(t,i,e,r,a,$,s,o,n,l,p,h,T,L,v,m,u,c){var Z=u||c;i-=a*=T,e-=$*=T;var f=v+l>r.width?r.width-l:v,d=o+p>r.height?r.height-p:o,_=m[3]+f*T+m[1],x=m[0]+d*T+m[2],g=i-m[3],y=e-m[0];(Z||0!==h)&&($iZLT$var$p1[0]=g,$iZLT$var$p4[0]=g,$iZLT$var$p1[1]=y,$iZLT$var$p2[1]=y,$iZLT$var$p2[0]=g+_,$iZLT$var$p3[0]=$iZLT$var$p2[0],$iZLT$var$p3[1]=y+x,$iZLT$var$p4[1]=$iZLT$var$p3[1]);var I=null;if(0!==h){var b=i+a,S=e+$;I=$iZLT$import$composeTransform($iZLT$var$tmpTransform,b,S,1,1,h,-b,-S),$iZLT$import$applyTransform($iZLT$var$tmpTransform,$iZLT$var$p1),$iZLT$import$applyTransform($iZLT$var$tmpTransform,$iZLT$var$p2),$iZLT$import$applyTransform($iZLT$var$tmpTransform,$iZLT$var$p3),$iZLT$import$applyTransform($iZLT$var$tmpTransform,$iZLT$var$p4),$iZLT$import$createOrUpdate(Math.min($iZLT$var$p1[0],$iZLT$var$p2[0],$iZLT$var$p3[0],$iZLT$var$p4[0]),Math.min($iZLT$var$p1[1],$iZLT$var$p2[1],$iZLT$var$p3[1],$iZLT$var$p4[1]),Math.max($iZLT$var$p1[0],$iZLT$var$p2[0],$iZLT$var$p3[0],$iZLT$var$p4[0]),Math.max($iZLT$var$p1[1],$iZLT$var$p2[1],$iZLT$var$p3[1],$iZLT$var$p4[1]),$iZLT$var$tmpExtent)}else $iZLT$import$createOrUpdate(g,y,g+_,y+x,$iZLT$var$tmpExtent);var C=t.canvas,E=c?c[2]*T/2:0,k=$iZLT$var$tmpExtent[0]-E<=C.width&&$iZLT$var$tmpExtent[2]+E>=0&&$iZLT$var$tmpExtent[1]-E<=C.height&&$iZLT$var$tmpExtent[3]+E>=0;if(L&&(i=Math.round(i),e=Math.round(e)),s){if(!k&&1==s[4])return;$iZLT$import$extend(s,$iZLT$var$tmpExtent);var R=k?[t,I?I.slice(0):null,n,r,l,p,f,d,i,e,T]:null;R&&(Z&&R.push(u,c,$iZLT$var$p1.slice(0),$iZLT$var$p2.slice(0),$iZLT$var$p3.slice(0),$iZLT$var$p4.slice(0)),s.push(R))}else k&&(Z&&this.replayTextBackground_(t,$iZLT$var$p1,$iZLT$var$p2,$iZLT$var$p3,$iZLT$var$p4,u,c),$iZLT$import$drawImageOrLabel(t,I,n,r,l,p,f,d,i,e,T))},t.prototype.fill_=function(t){if(this.alignFill_){var i=$iZLT$import$applyTransform(this.renderedTransform_,[0,0]),e=512*this.pixelRatio;t.save(),t.translate(i[0]%e,i[1]%e),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()},t.prototype.setStrokeStyle_=function(t,i){t.strokeStyle=i[1],t.lineWidth=i[2],t.lineCap=i[3],t.lineJoin=i[4],t.miterLimit=i[5],t.setLineDash&&(t.lineDashOffset=i[7],t.setLineDash(i[6]))},t.prototype.renderDeclutter=function(t,i,e,r){if(t&&t.length>5){var a=t[4];if(1==a||a==t.length-5){var $={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:i};if(r||(r=new $iZLT$import$RBush(9)),!r.collides($)){r.insert($);for(var s=5,o=t.length;s<o;++s){var n=t[s],l=n[0],p=l.globalAlpha;p!==e&&(l.globalAlpha=e),n.length>11&&this.replayTextBackground_(n[0],n[13],n[14],n[15],n[16],n[11],n[12]),$iZLT$import$drawImageOrLabel.apply(void 0,n),p!==e&&(l.globalAlpha=p)}}t.length=5,$iZLT$import$createOrUpdateEmpty(t)}}return r},t.prototype.drawLabelWithPointPlacement_=function(t,i,e,r){var a=this.textStates[i],$=this.createLabel(t,i,r,e),s=this.strokeStates[e],o=this.pixelRatio,n=$iZLT$import$TEXT_ALIGN[a.textAlign||$iZLT$import$defaultTextAlign],l=$iZLT$import$TEXT_ALIGN[a.textBaseline||$iZLT$import$defaultTextBaseline],p=s&&s.lineWidth?s.lineWidth:0;return{label:$,anchorX:n*($.width/o-2*a.scale)+2*(.5-n)*p,anchorY:l*$.height/o+2*(.5-l)*p}},t.prototype.execute_=function(t,i,e,r,a,$){var s;this.declutterItems.length=0,this.pixelCoordinates_&&$iZLT$import$equals(i,this.renderedTransform_)?s=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),s=$iZLT$import$transform2D(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),$iZLT$import$transformSetFromArray(this.renderedTransform_,i));for(var o,n,l,p,h,T,L,v,m,u,c,Z,f,d,_,x,g,y=0,I=e.length,b=0,S=0,C=0,E=null,k=null,R=this.coordinateCache_,O=this.viewRotation_,w=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,A={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:O},D=this.instructions!=e||this.overlaps?0:200;y<I;){var M=e[y];switch(M[0]){case $iZLT$import$CanvasInstruction.BEGIN_GEOMETRY:(_=M[1]).getGeometry()?void 0===$||$iZLT$import$intersects($,M[3])?++y:y=M[2]+1:y=M[2];break;case $iZLT$import$CanvasInstruction.BEGIN_PATH:S>D&&(this.fill_(t),S=0),C>D&&(t.stroke(),C=0),S||C||(t.beginPath(),p=NaN,h=NaN),++y;break;case $iZLT$import$CanvasInstruction.CIRCLE:var q=s[b=M[1]],N=s[b+1],P=s[b+2]-q,W=s[b+3]-N,j=Math.sqrt(P*P+W*W);t.moveTo(q+j,N),t.arc(q,N,j,0,2*Math.PI,!0),++y;break;case $iZLT$import$CanvasInstruction.CLOSE_PATH:t.closePath(),++y;break;case $iZLT$import$CanvasInstruction.CUSTOM:b=M[1],o=M[2];var B=M[3],F=M[4],G=6==M.length?M[5]:void 0;A.geometry=B,A.feature=_,y in R||(R[y]=[]);var X=R[y];G?G(s,b,o,2,X):(X[0]=s[b],X[1]=s[b+1],X.length=2),F(X,A),++y;break;case $iZLT$import$CanvasInstruction.DRAW_IMAGE:b=M[1],o=M[2],u=M[3],n=M[4],l=M[5],m=a?null:M[6];var Y=M[7],H=M[8],U=M[9],J=M[10],K=M[11],V=M[12],z=M[13],Q=M[14];if(!u&&M.length>=19){c=M[18],Z=M[19],f=M[20],d=M[21];var tt=this.drawLabelWithPointPlacement_(c,Z,f,d);u=tt.label,M[3]=u;var it=M[22];n=(tt.anchorX-it)*this.pixelRatio,M[4]=n;var et=M[23];l=(tt.anchorY-et)*this.pixelRatio,M[5]=l,Y=u.height,M[7]=Y,Q=u.width,M[14]=Q}var rt=void 0;M.length>24&&(rt=M[24]);var at=void 0,$t=void 0,st=void 0;M.length>16?(at=M[15],$t=M[16],st=M[17]):(at=$iZLT$import$defaultPadding,$t=!1,st=!1),K&&w?V+=O:K||w||(V-=O);for(var ot=0,nt=0;b<o;b+=2)if(!(rt&&rt[ot++]<Q/this.pixelRatio)){if(m){var lt=Math.floor(nt);m.length<lt+1&&((v=$iZLT$import$createEmpty()).push(m[0][4]),m.push(v)),v=m[lt]}this.replayImageOrLabel_(t,s[b],s[b+1],u,n,l,v,Y,H,U,J,V,z,r,Q,at,$t?E:null,st?k:null),v&&(nt===Math.floor(nt)&&this.declutterItems.push(this,v,_),nt+=1/v[4])}++y;break;case $iZLT$import$CanvasInstruction.DRAW_CHARS:var pt=M[1],ht=M[2],Tt=M[3];v=a?null:M[4];var Lt=M[5];d=M[6];var vt=M[7],mt=M[8],ut=M[9];f=M[10];var ct=M[11];c=M[12],Z=M[13];var Zt=M[14],ft=this.textStates[Z],dt=ft.font,_t=ft.scale*mt,xt=void 0;dt in this.widths_?xt=this.widths_[dt]:(xt={},this.widths_[dt]=xt);var gt=$iZLT$import$lineStringLength(s,pt,ht,2),yt=_t*$iZLT$import$measureAndCacheTextWidth(dt,c,xt);if(Lt||yt<=gt){var It=this.textStates[Z].textAlign,bt=(gt-yt)*$iZLT$import$TEXT_ALIGN[It],St=$iZLT$import$drawTextOnPath(s,pt,ht,2,c,bt,vt,_t,$iZLT$import$measureAndCacheTextWidth,dt,xt);if(St){var Ct=void 0,Et=void 0,kt=void 0,Rt=void 0,Ot=void 0;if(f)for(Ct=0,Et=St.length;Ct<Et;++Ct)kt=(Ot=St[Ct])[4],Rt=this.createLabel(kt,Z,\"\",f),n=Ot[2]+ct,l=Tt*Rt.height+2*(.5-Tt)*ct-ut,this.replayImageOrLabel_(t,Ot[0],Ot[1],Rt,n,l,v,Rt.height,1,0,0,Ot[3],Zt,!1,Rt.width,$iZLT$import$defaultPadding,null,null);if(d)for(Ct=0,Et=St.length;Ct<Et;++Ct)kt=(Ot=St[Ct])[4],Rt=this.createLabel(kt,Z,d,\"\"),n=Ot[2],l=Tt*Rt.height-ut,this.replayImageOrLabel_(t,Ot[0],Ot[1],Rt,n,l,v,Rt.height,1,0,0,Ot[3],Zt,!1,Rt.width,$iZLT$import$defaultPadding,null,null)}}this.declutterItems.push(this,v,_),++y;break;case $iZLT$import$CanvasInstruction.END_GEOMETRY:if(void 0!==a){var wt=a(_=M[1]);if(wt)return wt}++y;break;case $iZLT$import$CanvasInstruction.FILL:D?S++:this.fill_(t),++y;break;case $iZLT$import$CanvasInstruction.MOVE_TO_LINE_TO:for(b=M[1],o=M[2],x=s[b],L=(g=s[b+1])+.5|0,(T=x+.5|0)===p&&L===h||(t.moveTo(x,g),p=T,h=L),b+=2;b<o;b+=2)T=(x=s[b])+.5|0,L=(g=s[b+1])+.5|0,b!=o-2&&T===p&&L===h||(t.lineTo(x,g),p=T,h=L);++y;break;case $iZLT$import$CanvasInstruction.SET_FILL_STYLE:E=M,this.alignFill_=M[2],S&&(this.fill_(t),S=0,C&&(t.stroke(),C=0)),t.fillStyle=M[1],++y;break;case $iZLT$import$CanvasInstruction.SET_STROKE_STYLE:k=M,C&&(t.stroke(),C=0),this.setStrokeStyle_(t,M),++y;break;case $iZLT$import$CanvasInstruction.STROKE:D?C++:t.stroke(),++y;break;default:++y}}S&&this.fill_(t),C&&t.stroke()},t.prototype.execute=function(t,i,e,r){this.viewRotation_=e,this.execute_(t,i,this.instructions,r,void 0,void 0)},t.prototype.executeHitDetection=function(t,i,e,r,a){return this.viewRotation_=e,this.execute_(t,i,this.hitDetectionInstructions,!0,r,a)},t}();$iZLT$exports.default=$iZLT$export$default;"},"sourceMaps":null,"error":null,"hash":"0a55167baf206a641bbd4af540a62887","cacheData":{"env":{},"imports":{"$iZLT$import$equals":["../../array.js","equals"],"$iZLT$import$createEmpty":["../../extent.js","createEmpty"],"$iZLT$import$createOrUpdate":["../../extent.js","createOrUpdate"],"$iZLT$import$createOrUpdateEmpty":["../../extent.js","createOrUpdateEmpty"],"$iZLT$import$extend":["../../extent.js","extend"],"$iZLT$import$intersects":["../../extent.js","intersects"],"$iZLT$import$lineStringLength":["../../geom/flat/length.js","lineStringLength"],"$iZLT$import$drawTextOnPath":["../../geom/flat/textpath.js","drawTextOnPath"],"$iZLT$import$transform2D":["../../geom/flat/transform.js","transform2D"],"$iZLT$import$drawImageOrLabel":["../canvas.js","drawImageOrLabel"],"$iZLT$import$defaultPadding":["../canvas.js","defaultPadding"],"$iZLT$import$defaultTextBaseline":["../canvas.js","defaultTextBaseline"],"$iZLT$import$CanvasInstruction":["./Instruction.js","default"],"$iZLT$import$TEXT_ALIGN":["./TextBuilder.js","TEXT_ALIGN"],"$iZLT$import$createTransform":["../../transform.js","create"],"$iZLT$import$composeTransform":["../../transform.js","compose"],"$iZLT$import$applyTransform":["../../transform.js","apply"],"$iZLT$import$transformSetFromArray":["../../transform.js","setFromArray"],"$iZLT$import$defaultTextAlign":["../canvas.js","defaultTextAlign"],"$iZLT$import$measureTextHeight":["../canvas.js","measureTextHeight"],"$iZLT$import$measureAndCacheTextWidth":["../canvas.js","measureAndCacheTextWidth"],"$iZLT$import$measureTextWidths":["../canvas.js","measureTextWidths"],"$iZLT$import$RBush":["rbush/rbush.js","default"],"$iZLT$import$WORKER_OFFSCREEN_CANVAS":["../../has.js","WORKER_OFFSCREEN_CANVAS"]},"exports":{"default":"$iZLT$export$default"},"wildcards":[],"sideEffects":false,"isES6Module":true}}