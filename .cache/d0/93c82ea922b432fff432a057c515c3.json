{"id":"o8Mp","dependencies":[{"name":"D:\\Projects\\ol\\package.json","includedInParent":true,"mtime":1586548571472},{"name":"D:\\Projects\\ol\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1586157047249},{"name":"./common.js","loc":{"line":17,"column":32},"parent":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\Tile.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\common.js"},{"name":"../Tile.js","loc":{"line":18,"column":17},"parent":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\Tile.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\Tile.js"},{"name":"../TileState.js","loc":{"line":19,"column":22},"parent":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\Tile.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\TileState.js"},{"name":"../events.js","loc":{"line":20,"column":38},"parent":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\Tile.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\events.js"},{"name":"../events/EventType.js","loc":{"line":21,"column":22},"parent":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\Tile.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\events\\EventType.js"},{"name":"../extent.js","loc":{"line":22,"column":52},"parent":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\Tile.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\extent.js"},{"name":"../math.js","loc":{"line":23,"column":22},"parent":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\Tile.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\math.js"},{"name":"../reproj.js","loc":{"line":24,"column":71},"parent":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\Tile.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\reproj.js"},{"name":"./Triangulation.js","loc":{"line":25,"column":26},"parent":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\Tile.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\reproj\\Triangulation.js"}],"generated":{"js":"var $o8Mp$exports={};$parcel$require(\"o8Mp\",\"./common.js\"),$parcel$require(\"o8Mp\",\"../Tile.js\"),$parcel$require(\"o8Mp\",\"../TileState.js\"),$parcel$require(\"o8Mp\",\"../events.js\"),$parcel$require(\"o8Mp\",\"../events/EventType.js\"),$parcel$require(\"o8Mp\",\"../extent.js\"),$parcel$require(\"o8Mp\",\"../math.js\"),$parcel$require(\"o8Mp\",\"../reproj.js\"),$parcel$require(\"o8Mp\",\"./Triangulation.js\");var $o8Mp$var$__extends=$o8Mp$exports&&$o8Mp$exports.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}(),$o8Mp$export$default=function(t){function e(e,r,o,i,p,s,$,n,a,l,u){var c=t.call(this,p,$o8Mp$import$TileState.IDLE)||this;c.renderEdges_=void 0!==u&&u,c.pixelRatio_=$,c.gutter_=n,c.canvas_=null,c.sourceTileGrid_=r,c.targetTileGrid_=i,c.wrappedTileCoord_=s||p,c.sourceTiles_=[],c.sourcesListenerKeys_=null,c.sourceZ_=0;var _=i.getTileCoordExtent(c.wrappedTileCoord_),T=c.targetTileGrid_.getExtent(),M=c.sourceTileGrid_.getExtent(),h=T?$o8Mp$import$getIntersection(_,T):_;if(0===$o8Mp$import$getArea(h))return c.state=$o8Mp$import$TileState.EMPTY,c;var g=e.getExtent();g&&(M=M?$o8Mp$import$getIntersection(M,g):g);var m=i.getResolution(c.wrappedTileCoord_[0]),d=$o8Mp$import$getCenter(h),f=$o8Mp$import$calculateSourceResolution(e,o,d,m);if(!isFinite(f)||f<=0)return c.state=$o8Mp$import$TileState.EMPTY,c;var E=void 0!==l?l:$o8Mp$import$ERROR_THRESHOLD;if(c.triangulation_=new $o8Mp$import$Triangulation(e,o,h,M,f*E,m),0===c.triangulation_.getTriangles().length)return c.state=$o8Mp$import$TileState.EMPTY,c;c.sourceZ_=r.getZForResolution(f);var v=c.triangulation_.calculateSourceExtent();if(M&&(e.canWrapX()?(v[1]=$o8Mp$import$clamp(v[1],M[1],M[3]),v[3]=$o8Mp$import$clamp(v[3],M[1],M[3])):v=$o8Mp$import$getIntersection(v,M)),$o8Mp$import$getArea(v)){for(var S=r.getTileRangeForExtentAndZ(v,c.sourceZ_),x=S.minX;x<=S.maxX;x++)for(var y=S.minY;y<=S.maxY;y++){var R=a(c.sourceZ_,x,y,$);R&&c.sourceTiles_.push(R)}0===c.sourceTiles_.length&&(c.state=$o8Mp$import$TileState.EMPTY)}else c.state=$o8Mp$import$TileState.EMPTY;return c}return $o8Mp$var$__extends(e,t),e.prototype.getImage=function(){return this.canvas_},e.prototype.reproject_=function(){var t=[];if(this.sourceTiles_.forEach(function(e,r,o){e&&e.getState()==$o8Mp$import$TileState.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}.bind(this)),this.sourceTiles_.length=0,0===t.length)this.state=$o8Mp$import$TileState.ERROR;else{var e=this.wrappedTileCoord_[0],r=this.targetTileGrid_.getTileSize(e),o=\"number\"==typeof r?r:r[0],i=\"number\"==typeof r?r:r[1],p=this.targetTileGrid_.getResolution(e),s=this.sourceTileGrid_.getResolution(this.sourceZ_),$=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=$o8Mp$import$renderReprojected(o,i,this.pixelRatio_,s,this.sourceTileGrid_.getExtent(),p,$,this.triangulation_,t,this.gutter_,this.renderEdges_),this.state=$o8Mp$import$TileState.LOADED}this.changed()},e.prototype.load=function(){if(this.state==$o8Mp$import$TileState.IDLE){this.state=$o8Mp$import$TileState.LOADING,this.changed();var t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(function(e,r,o){var i=e.getState();if(i==$o8Mp$import$TileState.IDLE||i==$o8Mp$import$TileState.LOADING){t++;var p=$o8Mp$import$listen(e,$o8Mp$import$EventType.CHANGE,function(r){var o=e.getState();o!=$o8Mp$import$TileState.LOADED&&o!=$o8Mp$import$TileState.ERROR&&o!=$o8Mp$import$TileState.EMPTY||($o8Mp$import$unlistenByKey(p),0===--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(p)}}.bind(this)),this.sourceTiles_.forEach(function(t,e,r){t.getState()==$o8Mp$import$TileState.IDLE&&t.load()}),0===t&&setTimeout(this.reproject_.bind(this),0)}},e.prototype.unlistenSources_=function(){this.sourcesListenerKeys_.forEach($o8Mp$import$unlistenByKey),this.sourcesListenerKeys_=null},e}($o8Mp$import$Tile);$o8Mp$exports.default=$o8Mp$export$default;"},"sourceMaps":null,"error":null,"hash":"67bf32e4deecacb7ffdae26cfae9b470","cacheData":{"env":{},"imports":{"$o8Mp$import$ERROR_THRESHOLD":["./common.js","ERROR_THRESHOLD"],"$o8Mp$import$Tile":["../Tile.js","default"],"$o8Mp$import$TileState":["../TileState.js","default"],"$o8Mp$import$listen":["../events.js","listen"],"$o8Mp$import$unlistenByKey":["../events.js","unlistenByKey"],"$o8Mp$import$EventType":["../events/EventType.js","default"],"$o8Mp$import$getArea":["../extent.js","getArea"],"$o8Mp$import$getCenter":["../extent.js","getCenter"],"$o8Mp$import$getIntersection":["../extent.js","getIntersection"],"$o8Mp$import$clamp":["../math.js","clamp"],"$o8Mp$import$calculateSourceResolution":["../reproj.js","calculateSourceResolution"],"$o8Mp$import$renderReprojected":["../reproj.js","render"],"$o8Mp$import$Triangulation":["./Triangulation.js","default"]},"exports":{"default":"$o8Mp$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}