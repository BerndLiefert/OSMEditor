{"id":"FiPw","dependencies":[{"name":"D:\\Projects\\ol\\package.json","includedInParent":true,"mtime":1586548571472},{"name":"D:\\Projects\\ol\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1586157047249},{"name":"../Object.js","loc":{"line":17,"column":35},"parent":"D:\\Projects\\ol\\node_modules\\ol\\layer\\Heatmap.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\Object.js"},{"name":"../dom.js","loc":{"line":18,"column":38},"parent":"D:\\Projects\\ol\\node_modules\\ol\\layer\\Heatmap.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\dom.js"},{"name":"./Vector.js","loc":{"line":19,"column":24},"parent":"D:\\Projects\\ol\\node_modules\\ol\\layer\\Heatmap.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\layer\\Vector.js"},{"name":"../math.js","loc":{"line":20,"column":22},"parent":"D:\\Projects\\ol\\node_modules\\ol\\layer\\Heatmap.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\math.js"},{"name":"../obj.js","loc":{"line":21,"column":23},"parent":"D:\\Projects\\ol\\node_modules\\ol\\layer\\Heatmap.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\obj.js"},{"name":"../renderer/webgl/PointsLayer.js","loc":{"line":22,"column":37},"parent":"D:\\Projects\\ol\\node_modules\\ol\\layer\\Heatmap.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\renderer\\webgl\\PointsLayer.js"}],"generated":{"js":"var $FiPw$exports={};$parcel$require(\"FiPw\",\"../Object.js\"),$parcel$require(\"FiPw\",\"../dom.js\"),$parcel$require(\"FiPw\",\"./Vector.js\"),$parcel$require(\"FiPw\",\"../math.js\"),$parcel$require(\"FiPw\",\"../obj.js\"),$parcel$require(\"FiPw\",\"../renderer/webgl/PointsLayer.js\");var $FiPw$var$__extends=$FiPw$exports&&$FiPw$exports.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function i(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(i.prototype=r.prototype,new i)}}(),$FiPw$var$Property={BLUR:\"blur\",GRADIENT:\"gradient\",RADIUS:\"radius\"},$FiPw$var$DEFAULT_GRADIENT=[\"#00f\",\"#0ff\",\"#0f0\",\"#ff0\",\"#f00\"],$FiPw$export$default=function(t){function e(e){var r=this,i=e||{},n=$FiPw$import$assign({},i);delete n.gradient,delete n.radius,delete n.blur,delete n.weight,(r=t.call(this,n)||this).gradient_=null,r.addEventListener($FiPw$import$getChangeEventType($FiPw$var$Property.GRADIENT),r.handleGradientChanged_),r.setGradient(i.gradient?i.gradient:$FiPw$var$DEFAULT_GRADIENT),r.setBlur(void 0!==i.blur?i.blur:15),r.setRadius(void 0!==i.radius?i.radius:8);var o=i.weight?i.weight:\"weight\";return r.weightFunction_=\"string\"==typeof o?function(t){return t.get(o)}:o,r.setRenderOrder(null),r}return $FiPw$var$__extends(e,t),e.prototype.getBlur=function(){return this.get($FiPw$var$Property.BLUR)},e.prototype.getGradient=function(){return this.get($FiPw$var$Property.GRADIENT)},e.prototype.getRadius=function(){return this.get($FiPw$var$Property.RADIUS)},e.prototype.handleGradientChanged_=function(){this.gradient_=$FiPw$var$createGradient(this.getGradient())},e.prototype.setBlur=function(t){this.set($FiPw$var$Property.BLUR,t)},e.prototype.setGradient=function(t){this.set($FiPw$var$Property.GRADIENT,t)},e.prototype.setRadius=function(t){this.set($FiPw$var$Property.RADIUS,t)},e.prototype.createRenderer=function(){return new $FiPw$import$WebGLPointsLayerRenderer(this,{attributes:[{name:\"weight\",callback:function(t){var e=this.weightFunction_(t);return void 0!==e?$FiPw$import$clamp(e,0,1):1}.bind(this)}],vertexShader:\"\\n        precision mediump float;\\n        uniform mat4 u_projectionMatrix;\\n        uniform mat4 u_offsetScaleMatrix;\\n        uniform float u_size;\\n        attribute vec2 a_position;\\n        attribute float a_index;\\n        attribute float a_weight;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n\\n        void main(void) {\\n          mat4 offsetMatrix = u_offsetScaleMatrix;\\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\\n          v_texCoord = vec2(u, v);\\n          v_weight = a_weight;\\n        }\",fragmentShader:\"\\n        precision mediump float;\\n        uniform float u_blurSlope;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n\\n        void main(void) {\\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\\n          gl_FragColor = vec4(alpha, alpha, alpha, alpha);\\n        }\",hitVertexShader:\"\\n        precision mediump float;\\n        uniform mat4 u_projectionMatrix;\\n        uniform mat4 u_offsetScaleMatrix;\\n        uniform float u_size;\\n        attribute vec2 a_position;\\n        attribute float a_index;\\n        attribute float a_weight;\\n        attribute vec4 a_hitColor;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n        varying vec4 v_hitColor;\\n\\n        void main(void) {\\n          mat4 offsetMatrix = u_offsetScaleMatrix;\\n          float offsetX = a_index == 0.0 || a_index == 3.0 ? -u_size / 2.0 : u_size / 2.0;\\n          float offsetY = a_index == 0.0 || a_index == 1.0 ? -u_size / 2.0 : u_size / 2.0;\\n          vec4 offsets = offsetMatrix * vec4(offsetX, offsetY, 0.0, 0.0);\\n          gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\\n          float u = a_index == 0.0 || a_index == 3.0 ? 0.0 : 1.0;\\n          float v = a_index == 0.0 || a_index == 1.0 ? 0.0 : 1.0;\\n          v_texCoord = vec2(u, v);\\n          v_hitColor = a_hitColor;\\n          v_weight = a_weight;\\n        }\",hitFragmentShader:\"\\n        precision mediump float;\\n        uniform float u_blurSlope;\\n\\n        varying vec2 v_texCoord;\\n        varying float v_weight;\\n        varying vec4 v_hitColor;\\n\\n        void main(void) {\\n          vec2 texCoord = v_texCoord * 2.0 - vec2(1.0, 1.0);\\n          float sqRadius = texCoord.x * texCoord.x + texCoord.y * texCoord.y;\\n          float value = (1.0 - sqrt(sqRadius)) * u_blurSlope;\\n          float alpha = smoothstep(0.0, 1.0, value) * v_weight;\\n          if (alpha < 0.05) {\\n            discard;\\n          }\\n\\n          gl_FragColor = v_hitColor;\\n        }\",uniforms:{u_size:function(){return 2*(this.get($FiPw$var$Property.RADIUS)+this.get($FiPw$var$Property.BLUR))}.bind(this),u_blurSlope:function(){return this.get($FiPw$var$Property.RADIUS)/Math.max(1,this.get($FiPw$var$Property.BLUR))}.bind(this)},postProcesses:[{fragmentShader:\"\\n            precision mediump float;\\n\\n            uniform sampler2D u_image;\\n            uniform sampler2D u_gradientTexture;\\n\\n            varying vec2 v_texCoord;\\n\\n            void main() {\\n              vec4 color = texture2D(u_image, v_texCoord);\\n              gl_FragColor.a = color.a;\\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\\n              gl_FragColor.rgb *= gl_FragColor.a;\\n            }\",uniforms:{u_gradientTexture:function(){return this.gradient_}.bind(this)}}]})},e}($FiPw$import$VectorLayer);function $FiPw$var$createGradient(t){for(var e=$FiPw$import$createCanvasContext2D(1,256),r=e.createLinearGradient(0,0,1,256),i=1/(t.length-1),n=0,o=t.length;n<o;++n)r.addColorStop(n*i,t[n]);return e.fillStyle=r,e.fillRect(0,0,1,256),e.canvas}$FiPw$exports.default=$FiPw$export$default;"},"sourceMaps":null,"error":null,"hash":"42885c0893cf68fe18596b221249a465","cacheData":{"env":{},"imports":{"$FiPw$import$getChangeEventType":["../Object.js","getChangeEventType"],"$FiPw$import$createCanvasContext2D":["../dom.js","createCanvasContext2D"],"$FiPw$import$VectorLayer":["./Vector.js","default"],"$FiPw$import$clamp":["../math.js","clamp"],"$FiPw$import$assign":["../obj.js","assign"],"$FiPw$import$WebGLPointsLayerRenderer":["../renderer/webgl/PointsLayer.js","default"]},"exports":{"default":"$FiPw$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}