{"id":"v5GW","dependencies":[{"name":"D:\\Projects\\ol\\package.json","includedInParent":true,"mtime":1586548571472},{"name":"D:\\Projects\\ol\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1586157047249},{"name":"../../util.js","loc":{"line":17,"column":23},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\TextBuilder.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\util.js"},{"name":"../../colorlike.js","loc":{"line":18,"column":28},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\TextBuilder.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\colorlike.js"},{"name":"../../extent.js","loc":{"line":19,"column":27},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\TextBuilder.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\extent.js"},{"name":"../../geom/flat/straightchunk.js","loc":{"line":20,"column":30},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\TextBuilder.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\geom\\flat\\straightchunk.js"},{"name":"../../geom/GeometryType.js","loc":{"line":21,"column":25},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\TextBuilder.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\geom\\GeometryType.js"},{"name":"../canvas.js","loc":{"line":22,"column":245},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\TextBuilder.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas.js"},{"name":"./Instruction.js","loc":{"line":23,"column":30},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\TextBuilder.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Instruction.js"},{"name":"./Builder.js","loc":{"line":24,"column":26},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\TextBuilder.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\Builder.js"},{"name":"../../style/TextPlacement.js","loc":{"line":25,"column":26},"parent":"D:\\Projects\\ol\\node_modules\\ol\\render\\canvas\\TextBuilder.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\style\\TextPlacement.js"}],"generated":{"js":"var $v5GW$exports={};$parcel$require(\"v5GW\",\"../../util.js\"),$parcel$require(\"v5GW\",\"../../colorlike.js\"),$parcel$require(\"v5GW\",\"../../extent.js\"),$parcel$require(\"v5GW\",\"../../geom/flat/straightchunk.js\"),$parcel$require(\"v5GW\",\"../../geom/GeometryType.js\"),$parcel$require(\"v5GW\",\"../canvas.js\"),$parcel$require(\"v5GW\",\"./Instruction.js\"),$parcel$require(\"v5GW\",\"./Builder.js\"),$parcel$require(\"v5GW\",\"../../style/TextPlacement.js\");var $v5GW$var$__extends=$v5GW$exports&&$v5GW$exports.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$v5GW$export$TEXT_ALIGN={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};$v5GW$exports.TEXT_ALIGN=$v5GW$export$TEXT_ALIGN;var $v5GW$export$default=function(t){function e(e,i,r,s){var o=t.call(this,e,i,r,s)||this;return o.declutterGroups_,o.labels_=null,o.text_=\"\",o.textOffsetX_=0,o.textOffsetY_=0,o.textRotateWithView_=void 0,o.textRotation_=0,o.textFillState_=null,o.fillStates={},o.textStrokeState_=null,o.strokeStates={},o.textState_={},o.textStates={},o.textKey_=\"\",o.fillKey_=\"\",o.strokeKey_=\"\",o}return $v5GW$var$__extends(e,t),e.prototype.finish=function(){var e=t.prototype.finish.call(this);return e.textStates=this.textStates,e.fillStates=this.fillStates,e.strokeStates=this.strokeStates,e},e.prototype.drawText=function(t,e){var i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(\"\"!==this.text_&&s&&(i||r)){var o,l,a=this.coordinates.length,n=t.getType(),$=null,h=2,p=2;if(s.placement===$v5GW$import$TextPlacement.LINE){if(!$v5GW$import$intersects(this.getBufferedMaxExtent(),t.getExtent()))return;var u=void 0;if($=t.getFlatCoordinates(),p=t.getStride(),n==$v5GW$import$GeometryType.LINE_STRING)u=[$.length];else if(n==$v5GW$import$GeometryType.MULTI_LINE_STRING)u=t.getEnds();else if(n==$v5GW$import$GeometryType.POLYGON)u=t.getEnds().slice(0,1);else if(n==$v5GW$import$GeometryType.MULTI_POLYGON){var f=t.getEndss();for(u=[],o=0,l=f.length;o<l;++o)u.push(f[o][0])}this.beginGeometry(t,e);for(var v=s.textAlign,d=0,c=void 0,_=0,x=u.length;_<x;++_){if(null==v){var g=$v5GW$import$matchingChunk(s.maxAngle,$,d,u[_],p);d=g[0],c=g[1]}else c=u[_];for(o=d;o<c;o+=p)this.coordinates.push($[o],$[o+1]);h=this.coordinates.length,d=u[_];var G=this.declutterGroups_?0===_?this.declutterGroups_[0]:[].concat(this.declutterGroups_[0]):null;this.drawChars_(a,h,G),a=h}this.endGeometry(e)}else{var S=null;switch(s.overflow||(S=[]),n){case $v5GW$import$GeometryType.POINT:case $v5GW$import$GeometryType.MULTI_POINT:h=($=t.getFlatCoordinates()).length;break;case $v5GW$import$GeometryType.LINE_STRING:$=t.getFlatMidpoint();break;case $v5GW$import$GeometryType.CIRCLE:$=t.getCenter();break;case $v5GW$import$GeometryType.MULTI_LINE_STRING:h=($=t.getFlatMidpoints()).length;break;case $v5GW$import$GeometryType.POLYGON:$=t.getFlatInteriorPoint(),s.overflow||S.push($[2]/this.resolution),p=3;break;case $v5GW$import$GeometryType.MULTI_POLYGON:var y=t.getFlatInteriorPoints();for($=[],o=0,l=y.length;o<l;o+=3)s.overflow||S.push(y[o+2]/this.resolution),$.push(y[o],y[o+1]);if(0==(h=$.length))return}h=this.appendFlatCoordinates($,0,h,p,!1,!1),this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&(this.updateFillStyle(this.state,this.createFill),this.hitDetectionInstructions.push(this.createFill(this.state))),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);var m=this.pixelRatio;this.instructions.push([$v5GW$import$CanvasInstruction.DRAW_IMAGE,a,h,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1,NaN,s.padding==$v5GW$import$defaultPadding?$v5GW$import$defaultPadding:s.padding.map(function(t){return t*m}),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]),this.hitDetectionInstructions.push([$v5GW$import$CanvasInstruction.DRAW_IMAGE,a,h,null,NaN,NaN,this.declutterGroups_,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,1/this.pixelRatio,NaN,s.padding,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,S]),this.endGeometry(e)}}},e.prototype.saveTextStates_=function(){var t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;t&&(r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));var s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||$v5GW$import$defaultTextAlign,textBaseline:e.textBaseline||$v5GW$import$defaultTextBaseline,scale:e.scale});var o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))},e.prototype.drawChars_=function(t,e,i){var r=this.textStrokeState_,s=this.textState_,o=this.strokeKey_,l=this.textKey_,a=this.fillKey_;this.saveTextStates_();var n=this.pixelRatio,$=$v5GW$export$TEXT_ALIGN[s.textBaseline],h=this.textOffsetY_*n,p=this.text_,u=s.scale,f=r?r.lineWidth*u/2:0;this.instructions.push([$v5GW$import$CanvasInstruction.DRAW_CHARS,t,e,$,i,s.overflow,a,s.maxAngle,n,h,o,f*n,p,l,1]),this.hitDetectionInstructions.push([$v5GW$import$CanvasInstruction.DRAW_CHARS,t,e,$,i,s.overflow,a,s.maxAngle,1,h,o,f,p,l,1/n])},e.prototype.setTextStyle=function(t,e){var i,r,s;if(t){this.declutterGroups_=e;var o=t.getFill();o?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=$v5GW$import$asColorLike(o.getColor()||$v5GW$import$defaultFillStyle)):(r=null,this.textFillState_=r);var l=t.getStroke();if(l){(s=this.textStrokeState_)||(s={},this.textStrokeState_=s);var a=l.getLineDash(),n=l.getLineDashOffset(),$=l.getWidth(),h=l.getMiterLimit();s.lineCap=l.getLineCap()||$v5GW$import$defaultLineCap,s.lineDash=a?a.slice():$v5GW$import$defaultLineDash,s.lineDashOffset=void 0===n?$v5GW$import$defaultLineDashOffset:n,s.lineJoin=l.getLineJoin()||$v5GW$import$defaultLineJoin,s.lineWidth=void 0===$?$v5GW$import$defaultLineWidth:$,s.miterLimit=void 0===h?$v5GW$import$defaultMiterLimit:h,s.strokeStyle=$v5GW$import$asColorLike(l.getColor()||$v5GW$import$defaultStrokeStyle)}else s=null,this.textStrokeState_=s;i=this.textState_;var p=t.getFont()||$v5GW$import$defaultFont;$v5GW$import$registerFont(p);var u=t.getScale();i.overflow=t.getOverflow(),i.font=p,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.textBaseline=t.getTextBaseline()||$v5GW$import$defaultTextBaseline,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||$v5GW$import$defaultPadding,i.scale=void 0===u?1:u;var f=t.getOffsetX(),v=t.getOffsetY(),d=t.getRotateWithView(),c=t.getRotation();this.text_=t.getText()||\"\",this.textOffsetX_=void 0===f?0:f,this.textOffsetY_=void 0===v?0:v,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0===c?0:c,this.strokeKey_=s?(\"string\"==typeof s.strokeStyle?s.strokeStyle:$v5GW$import$getUid(s.strokeStyle))+s.lineCap+s.lineDashOffset+\"|\"+s.lineWidth+s.lineJoin+s.miterLimit+\"[\"+s.lineDash.join()+\"]\":\"\",this.textKey_=i.font+i.scale+(i.textAlign||\"?\")+(i.textBaseline||\"?\"),this.fillKey_=r?\"string\"==typeof r.fillStyle?r.fillStyle:\"|\"+$v5GW$import$getUid(r.fillStyle):\"\"}else this.text_=\"\"},e}($v5GW$import$CanvasBuilder);$v5GW$exports.default=$v5GW$export$default;"},"sourceMaps":null,"error":null,"hash":"7f386af4a360fe498f6cc54cfbf20588","cacheData":{"env":{},"imports":{"$v5GW$import$getUid":["../../util.js","getUid"],"$v5GW$import$asColorLike":["../../colorlike.js","asColorLike"],"$v5GW$import$intersects":["../../extent.js","intersects"],"$v5GW$import$matchingChunk":["../../geom/flat/straightchunk.js","matchingChunk"],"$v5GW$import$GeometryType":["../../geom/GeometryType.js","default"],"$v5GW$import$defaultTextAlign":["../canvas.js","defaultTextAlign"],"$v5GW$import$defaultPadding":["../canvas.js","defaultPadding"],"$v5GW$import$defaultLineCap":["../canvas.js","defaultLineCap"],"$v5GW$import$defaultLineDashOffset":["../canvas.js","defaultLineDashOffset"],"$v5GW$import$defaultLineDash":["../canvas.js","defaultLineDash"],"$v5GW$import$defaultLineJoin":["../canvas.js","defaultLineJoin"],"$v5GW$import$defaultFillStyle":["../canvas.js","defaultFillStyle"],"$v5GW$import$registerFont":["../canvas.js","registerFont"],"$v5GW$import$defaultFont":["../canvas.js","defaultFont"],"$v5GW$import$defaultLineWidth":["../canvas.js","defaultLineWidth"],"$v5GW$import$defaultMiterLimit":["../canvas.js","defaultMiterLimit"],"$v5GW$import$defaultStrokeStyle":["../canvas.js","defaultStrokeStyle"],"$v5GW$import$defaultTextBaseline":["../canvas.js","defaultTextBaseline"],"$v5GW$import$CanvasInstruction":["./Instruction.js","default"],"$v5GW$import$CanvasBuilder":["./Builder.js","default"],"$v5GW$import$TextPlacement":["../../style/TextPlacement.js","default"]},"exports":{"TEXT_ALIGN":"$v5GW$export$TEXT_ALIGN","default":"$v5GW$export$default"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}