{"id":"cSfn","dependencies":[{"name":"D:\\Projects\\ol\\package.json","includedInParent":true,"mtime":1586548571472},{"name":"D:\\Projects\\ol\\node_modules\\ol\\package.json","includedInParent":true,"mtime":1586157047249},{"name":"../tileurlfunction.js","loc":{"line":17,"column":75},"parent":"D:\\Projects\\ol\\node_modules\\ol\\source\\WMTS.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\tileurlfunction.js"},{"name":"../array.js","loc":{"line":18,"column":42},"parent":"D:\\Projects\\ol\\node_modules\\ol\\source\\WMTS.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\array.js"},{"name":"../obj.js","loc":{"line":19,"column":23},"parent":"D:\\Projects\\ol\\node_modules\\ol\\source\\WMTS.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\obj.js"},{"name":"../proj.js","loc":{"line":20,"column":49},"parent":"D:\\Projects\\ol\\node_modules\\ol\\source\\WMTS.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\proj.js"},{"name":"./TileImage.js","loc":{"line":21,"column":22},"parent":"D:\\Projects\\ol\\node_modules\\ol\\source\\WMTS.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\source\\TileImage.js"},{"name":"./WMTSRequestEncoding.js","loc":{"line":22,"column":32},"parent":"D:\\Projects\\ol\\node_modules\\ol\\source\\WMTS.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\source\\WMTSRequestEncoding.js"},{"name":"../tilegrid/WMTS.js","loc":{"line":23,"column":48},"parent":"D:\\Projects\\ol\\node_modules\\ol\\source\\WMTS.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\tilegrid\\WMTS.js"},{"name":"../uri.js","loc":{"line":24,"column":29},"parent":"D:\\Projects\\ol\\node_modules\\ol\\source\\WMTS.js","resolved":"D:\\Projects\\ol\\node_modules\\ol\\uri.js"}],"generated":{"js":"var $cSfn$exports={};$parcel$require(\"cSfn\",\"../tileurlfunction.js\"),$parcel$require(\"cSfn\",\"../array.js\"),$parcel$require(\"cSfn\",\"../obj.js\"),$parcel$require(\"cSfn\",\"../proj.js\"),$parcel$require(\"cSfn\",\"./TileImage.js\"),$parcel$require(\"cSfn\",\"./WMTSRequestEncoding.js\"),$parcel$require(\"cSfn\",\"../tilegrid/WMTS.js\"),$parcel$require(\"cSfn\",\"../uri.js\");var $cSfn$var$__extends=$cSfn$exports&&$cSfn$exports.__extends||function(){var t=function(e,i){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(e,i)};return function(e,i){function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),$cSfn$export$default=function(t){function e(e){var i=this,r=void 0!==e.requestEncoding?e.requestEncoding:$cSfn$import$WMTSRequestEncoding.KVP,n=e.tileGrid,o=e.urls;return void 0===o&&void 0!==e.url&&(o=$cSfn$import$expandUrl(e.url)),(i=t.call(this,{attributions:e.attributions,cacheSize:e.cacheSize,crossOrigin:e.crossOrigin,projection:e.projection,reprojectionErrorThreshold:e.reprojectionErrorThreshold,tileClass:e.tileClass,tileGrid:n,tileLoadFunction:e.tileLoadFunction,tilePixelRatio:e.tilePixelRatio,tileUrlFunction:$cSfn$import$nullTileUrlFunction,urls:o,wrapX:void 0!==e.wrapX&&e.wrapX,transition:e.transition})||this).version_=void 0!==e.version?e.version:\"1.0.0\",i.format_=void 0!==e.format?e.format:\"image/jpeg\",i.dimensions_=void 0!==e.dimensions?e.dimensions:{},i.layer_=e.layer,i.matrixSet_=e.matrixSet,i.style_=e.style,i.requestEncoding_=r,i.setKey(i.getKeyForDimensions_()),o&&o.length>0&&(i.tileUrlFunction=$cSfn$import$createFromTileUrlFunctions(o.map($cSfn$var$createFromWMTSTemplate.bind(i)))),i}return $cSfn$var$__extends(e,t),e.prototype.setUrls=function(t){this.urls=t;var e=t.join(\"\\n\");this.setTileUrlFunction($cSfn$import$createFromTileUrlFunctions(t.map($cSfn$var$createFromWMTSTemplate.bind(this))),e)},e.prototype.getDimensions=function(){return this.dimensions_},e.prototype.getFormat=function(){return this.format_},e.prototype.getLayer=function(){return this.layer_},e.prototype.getMatrixSet=function(){return this.matrixSet_},e.prototype.getRequestEncoding=function(){return this.requestEncoding_},e.prototype.getStyle=function(){return this.style_},e.prototype.getVersion=function(){return this.version_},e.prototype.getKeyForDimensions_=function(){var t=0,e=[];for(var i in this.dimensions_)e[t++]=i+\"-\"+this.dimensions_[i];return e.join(\"/\")},e.prototype.updateDimensions=function(t){$cSfn$import$assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())},e}($cSfn$import$TileImage);function $cSfn$export$optionsFromCapabilities(t,e){var i=t.Contents.Layer,r=$cSfn$import$find(i,function(t,i,r){return t.Identifier==e.layer});if(null===r)return null;var n,o=t.Contents.TileMatrixSet;(n=r.TileMatrixSetLink.length>1?\"projection\"in e?$cSfn$import$findIndex(r.TileMatrixSetLink,function(t,i,r){var n=$cSfn$import$find(o,function(e){return e.Identifier==t.TileMatrixSet}).SupportedCRS,c=$cSfn$import$getProjection(n.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/,\"$1:$3\"))||$cSfn$import$getProjection(n),s=$cSfn$import$getProjection(e.projection);return c&&s?$cSfn$import$equivalent(c,s):n==e.projection}):$cSfn$import$findIndex(r.TileMatrixSetLink,function(t,i,r){return t.TileMatrixSet==e.matrixSet}):0)<0&&(n=0);var c=r.TileMatrixSetLink[n].TileMatrixSet,s=r.TileMatrixSetLink[n].TileMatrixSetLimits,a=r.Format[0];\"format\"in e&&(a=e.format),(n=$cSfn$import$findIndex(r.Style,function(t,i,r){return\"style\"in e?t.Title==e.style:t.isDefault}))<0&&(n=0);var $=r.Style[n].Identifier,f={};\"Dimension\"in r&&r.Dimension.forEach(function(t,e,i){var r=t.Identifier,n=t.Default;void 0===n&&(n=t.Value[0]),f[r]=n});var p,l=t.Contents.TileMatrixSet,u=$cSfn$import$find(l,function(t,e,i){return t.Identifier==c}),S=u.SupportedCRS;if(S&&(p=$cSfn$import$getProjection(S.replace(/urn:ogc:def:crs:(\\w+):(.*:)?(\\w+)$/,\"$1:$3\"))||$cSfn$import$getProjection(S)),\"projection\"in e){var m=$cSfn$import$getProjection(e.projection);m&&(p&&!$cSfn$import$equivalent(m,p)||(p=m))}var d=u.TileMatrix[0],g=28e-5*d.ScaleDenominator,T=p===$cSfn$import$getProjection(\"EPSG:4326\")?[d.TopLeftCorner[1],d.TopLeftCorner[0]]:d.TopLeftCorner,h=d.TileWidth*g,v=d.TileHeight*g,x=[T[0],T[1]-v*d.MatrixHeight,T[0]+h*d.MatrixWidth,T[1]];null===p.getExtent()&&p.setExtent(x);var y=$cSfn$import$createFromCapabilitiesMatrixSet(u,x,s),_=[],M=e.requestEncoding;if(M=void 0!==M?M:\"\",\"OperationsMetadata\"in t&&\"GetTile\"in t.OperationsMetadata)for(var j=t.OperationsMetadata.GetTile.DCP.HTTP.Get,q=0,E=j.length;q<E;++q)if(j[q].Constraint){var F=$cSfn$import$find(j[q].Constraint,function(t){return\"GetEncoding\"==t.name}).AllowedValues.Value;if(\"\"===M&&(M=F[0]),M!==$cSfn$import$WMTSRequestEncoding.KVP)break;$cSfn$import$includes(F,$cSfn$import$WMTSRequestEncoding.KVP)&&_.push(j[q].href)}else j[q].href&&(M=$cSfn$import$WMTSRequestEncoding.KVP,_.push(j[q].href));return 0===_.length&&(M=$cSfn$import$WMTSRequestEncoding.REST,r.ResourceURL.forEach(function(t){\"tile\"===t.resourceType&&(a=t.format,_.push(t.template))})),{urls:_,layer:e.layer,matrixSet:c,format:a,projection:p,requestEncoding:M,tileGrid:y,style:$,dimensions:f,wrapX:!1,crossOrigin:e.crossOrigin}}function $cSfn$var$createFromWMTSTemplate(t){var e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};e==$cSfn$import$WMTSRequestEncoding.KVP&&$cSfn$import$assign(i,{Service:\"WMTS\",Request:\"GetTile\",Version:this.version_,Format:this.format_}),t=e==$cSfn$import$WMTSRequestEncoding.KVP?$cSfn$import$appendParams(t,i):t.replace(/\\{(\\w+?)\\}/g,function(t,e){return e.toLowerCase()in i?i[e.toLowerCase()]:t});var r=this.tileGrid,n=this.dimensions_;return function(i,o,c){if(i){var s={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};$cSfn$import$assign(s,n);var a=t;return a=e==$cSfn$import$WMTSRequestEncoding.KVP?$cSfn$import$appendParams(a,s):a.replace(/\\{(\\w+?)\\}/g,function(t,e){return s[e]})}}}$cSfn$exports.default=$cSfn$export$default,$cSfn$exports.optionsFromCapabilities=$cSfn$export$optionsFromCapabilities;"},"sourceMaps":null,"error":null,"hash":"fd756cbd93401bd080fa051deb826c9d","cacheData":{"env":{},"imports":{"$cSfn$import$expandUrl":["../tileurlfunction.js","expandUrl"],"$cSfn$import$createFromTileUrlFunctions":["../tileurlfunction.js","createFromTileUrlFunctions"],"$cSfn$import$nullTileUrlFunction":["../tileurlfunction.js","nullTileUrlFunction"],"$cSfn$import$find":["../array.js","find"],"$cSfn$import$findIndex":["../array.js","findIndex"],"$cSfn$import$includes":["../array.js","includes"],"$cSfn$import$assign":["../obj.js","assign"],"$cSfn$import$getProjection":["../proj.js","get"],"$cSfn$import$equivalent":["../proj.js","equivalent"],"$cSfn$import$TileImage":["./TileImage.js","default"],"$cSfn$import$WMTSRequestEncoding":["./WMTSRequestEncoding.js","default"],"$cSfn$import$createFromCapabilitiesMatrixSet":["../tilegrid/WMTS.js","createFromCapabilitiesMatrixSet"],"$cSfn$import$appendParams":["../uri.js","appendParams"]},"exports":{"default":"$cSfn$export$default","optionsFromCapabilities":"$cSfn$export$optionsFromCapabilities"},"wildcards":[],"sideEffects":false,"isCommonJS":true,"isES6Module":true}}