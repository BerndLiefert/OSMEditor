{"id":"RCUH","dependencies":[{"name":"D:\\Projects\\ol\\package.json","includedInParent":true,"mtime":1586548571472},{"name":"D:\\Projects\\ol\\node_modules\\pixelworks\\package.json","includedInParent":true,"mtime":1586157047249},{"name":"./util","loc":{"line":1,"column":27},"parent":"D:\\Projects\\ol\\node_modules\\pixelworks\\lib\\processor.js","resolved":"D:\\Projects\\ol\\node_modules\\pixelworks\\lib\\util.js"}],"generated":{"js":"var $RCUH$exports={},$RCUH$var$newImageData=$parcel$require(\"RCUH\",\"./util\").newImageData;function $RCUH$var$createMinion(e){var t=!0;try{new ImageData(10,10)}catch(a){t=!1}function r(e,r,a){return t?new ImageData(e,r,a):{data:e,width:r,height:a}}return function(t){var a,i,s=t.buffers,n=t.meta,o=t.imageOps,u=t.width,h=t.height,f=s.length,p=s[0].byteLength;if(o){var $=new Array(f);for(i=0;i<f;++i)$[i]=r(new Uint8ClampedArray(s[i]),u,h);a=e($,n).data}else{a=new Uint8ClampedArray(p);var c=new Array(f),_=new Array(f);for(i=0;i<f;++i)c[i]=new Uint8ClampedArray(s[i]),_[i]=[0,0,0,0];for(var v=0;v<p;v+=4){for(var l=0;l<f;++l){var g=c[l];_[l][0]=g[v],_[l][1]=g[v+1],_[l][2]=g[v+2],_[l][3]=g[v+3]}var d=e(_,n);a[v]=d[0],a[v+1]=d[1],a[v+2]=d[2],a[v+3]=d[3]}}return a.buffer}}function $RCUH$var$createWorker(e,t){var r=Object.keys(e.lib||{}).map(function(t){return\"var \"+t+\" = \"+e.lib[t].toString()+\";\"}).concat([\"var __minion__ = (\"+$RCUH$var$createMinion.toString()+\")(\",e.operation.toString(),\");\",'self.addEventListener(\"message\", function(event) {',\"  var buffer = __minion__(event.data);\",\"  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);\",\"});\"]),a=new Blob(r,{type:\"text/javascript\"}),i=URL.createObjectURL(a),s=new Worker(i);return s.addEventListener(\"message\",t),s}function $RCUH$var$createFauxWorker(e,t){var r=$RCUH$var$createMinion(e.operation);return{postMessage:function(e){setTimeout(function(){t({data:{buffer:r(e),meta:e.meta}})},0)}}}function $RCUH$var$Processor(e){var t;this._imageOps=!!e.imageOps;var r=[];if(t=0===e.threads?0:this._imageOps?1:e.threads||1)for(var a=0;a<t;++a)r[a]=$RCUH$var$createWorker(e,this._onWorkerMessage.bind(this,a));else r[0]=$RCUH$var$createFauxWorker(e,this._onWorkerMessage.bind(this,0));this._workers=r,this._queue=[],this._maxQueueLength=e.queue||1/0,this._running=0,this._dataLookup={},this._job=null}$RCUH$var$Processor.prototype.process=function(e,t,r){this._enqueue({inputs:e,meta:t,callback:r}),this._dispatch()},$RCUH$var$Processor.prototype.destroy=function(){for(var e in this)this[e]=null;this._destroyed=!0},$RCUH$var$Processor.prototype._enqueue=function(e){for(this._queue.push(e);this._queue.length>this._maxQueueLength;)this._queue.shift().callback(null,null)},$RCUH$var$Processor.prototype._dispatch=function(){if(0===this._running&&this._queue.length>0){var e=this._job=this._queue.shift(),t=e.inputs[0].width,r=e.inputs[0].height,a=e.inputs.map(function(e){return e.data.buffer}),i=this._workers.length;if(this._running=i,1===i)this._workers[0].postMessage({buffers:a,meta:e.meta,imageOps:this._imageOps,width:t,height:r},a);else for(var s=e.inputs[0].data.length,n=4*Math.ceil(s/4/i),o=0;o<i;++o){for(var u=o*n,h=[],f=0,p=a.length;f<p;++f)h.push(a[o].slice(u,u+n));this._workers[o].postMessage({buffers:h,meta:e.meta,imageOps:this._imageOps,width:t,height:r},h)}}},$RCUH$var$Processor.prototype._onWorkerMessage=function(e,t){this._destroyed||(this._dataLookup[e]=t.data,--this._running,0===this._running&&this._resolveJob())},$RCUH$var$Processor.prototype._resolveJob=function(){var e,t,r=this._job,a=this._workers.length;if(1===a)e=new Uint8ClampedArray(this._dataLookup[0].buffer),t=this._dataLookup[0].meta;else{var i=r.inputs[0].data.length;e=new Uint8ClampedArray(i),t=new Array(i);for(var s=4*Math.ceil(i/4/a),n=0;n<a;++n){var o=this._dataLookup[n].buffer,u=n*s;e.set(new Uint8ClampedArray(o),u),t[n]=this._dataLookup[n].meta}}this._job=null,this._dataLookup={},r.callback(null,$RCUH$var$newImageData(e,r.inputs[0].width,r.inputs[0].height),t),this._dispatch()},$RCUH$exports=$RCUH$var$Processor;"},"sourceMaps":null,"error":null,"hash":"b1b911050c09c9cbc95554e4cc5ac388","cacheData":{"env":{},"imports":{"$require$./util":["./util","*"]},"exports":{},"wildcards":[],"sideEffects":true,"isCommonJS":true}}